import { useEffect, useState } from "react";
import { BrowserRouter } from "react-router-dom";
import { GlobalContext } from "./Common/GlobalContext";
import {
  About,
  Contact,
  Experience,
  Footer,
  Hero,
  Navbar,
  Tech,
} from "./Components";
import { GlobalContextModel } from "./Models/GlobalContextModel";
const App = (): JSX.Element => {
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // useState, useRef, useContext, etc.
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  const [globalContext, setGlobalContext] = useState<GlobalContextModel>({
    setLaptopState(open) {
      setLaptopState(open);
    },
  });
  const [openLaptop, setOpenLaptop] = useState<boolean>(true);
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // useEffect
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  useEffect(() => {
    const clone = JSON.parse(
      JSON.stringify(globalContext)
    ) as GlobalContextModel;
    clone.setLaptopState = setOpenLaptop;
    setGlobalContext(clone);
  }, [globalContext]);
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // Misc Methods
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  const setLaptopState = (open: boolean): void => {
    setOpenLaptop(open);
  };
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // Callback methods
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // Component's render method
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  return (
    <BrowserRouter>
      <div className="relative z-0 bg-background-dark1">
        <GlobalContext.Provider value={globalContext}>
          <Navbar></Navbar>
          <Hero isLaptopOpen={openLaptop}></Hero>
          <About></About>
          <Experience></Experience>
          <div className="bg-tech-pattern bg-cover bg-no-repeat bg-center z-10">
            <Tech></Tech>
          </div>
          <div className="relative z-0">
            <Contact></Contact>
            <Footer></Footer>
          </div>
        </GlobalContext.Provider>
      </div>
    </BrowserRouter>
  );
};

export default App;
